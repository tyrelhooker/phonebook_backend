(this.webpackJsonpphonebook_frontend=this.webpackJsonpphonebook_frontend||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},20:function(e,n,t){},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(14),u=t.n(c),o=(t(20),t(4)),l=t(3),i=(t(21),function(e){var n=e.handleSearch,t=(e.searchResult,Object(a.useRef)());return r.a.createElement(r.a.Fragment,null,"Search for:",r.a.createElement("input",{ref:t,onChange:function(){n(t.current.value)},placeholder:"Enter a name to search"}))}),s=function(e){var n=e.handleAddPerson,t=Object(a.useRef)(),c=Object(a.useRef)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(t.current.value,c.current.value,c,t)}},r.a.createElement("div",null,"name: \xa0",r.a.createElement("input",{ref:t,type:"text",placeholder:"enter person's name",required:!0})),r.a.createElement("div",null,"phone number: \xa0",r.a.createElement("input",{ref:c,type:"text",placeholder:"xxx-xxx-xxxx",required:!0})),r.a.createElement("button",{type:"submit"},"Add Person")))},m=function(e){var n=e.searchResult,t=e.handleRemoval;return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",null,r.a.createElement("tbody",null,void 0===n?r.a.createElement("tr",null,r.a.createElement("td",null,"None: Search for a name to display results")):n.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null," ",e.name," "),r.a.createElement("td",null,".".repeat(10)),r.a.createElement("td",null,e.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return t(e.id)}},"delete")))})))))},f=t(2),d=t.n(f),h="/api/persons",p=function(){return d.a.get(h).then((function(e){return e.data}))},b=function(e){return d.a.post(h,e).then((function(e){return e.data}))},E=function(e){return d.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},v=function(e,n){return d.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"message"},n)},x=function(e,n){console.log("nameInput",e),e.current.value="",n.current.value="",e.current.focus()},j=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)([]),f=Object(l.a)(u,2),d=f[0],h=f[1],j=Object(a.useState)(null),O=Object(l.a)(j,2),k=O[0],y=O[1];Object(a.useEffect)((function(){p().then((function(e){return c(e)})).catch((function(e){y("".concat(e,": Failed to retrieve persons.")),setTimeout((function(){y(null)}),5e3)}))}),[d]);var R=function(e,n,a){var r=e.id,u=e.name;if(window.confirm("".concat(u," already exists. Would you like to change their phone number in the phonebook?"))){n.current.focus();var l=n.current.value,i=t.find((function(e){return e.id===r})),s=Object(o.a)(Object(o.a)({},i),{},{number:l});v(r,s).then((function(e){return c(t.map((function(n){return n.id!==r?n:e})))})).catch((function(e){return y("".concat(e,":  ").concat(u,"'s has previously been deleted"))})),y("".concat(u,"'s phone number has been changed")),setTimeout((function(){y(null)}),5e3)}x(a,n)};return r.a.createElement("div",{className:"App"},r.a.createElement("h2",null,"Phonebook"),r.a.createElement("h3",null,"Name Search"),r.a.createElement(i,{handleSearch:function(e){var n=function(){return e=e.toUpperCase(),t.filter((function(n){return n.name.toUpperCase().includes(e)}))};n?function(e){var n=e();h(n)}(n):console.log("No person found")},searchResult:d}),r.a.createElement("h3",null,"Add Person to Phonebook"),r.a.createElement(s,{handleAddPerson:function(e,n,a,r){var u=t.find((function(n){return n.name.toLowerCase()===e.toLowerCase()}));u?R(u,a,r):function(){var u,o={name:(u=e,u.split(" ").map((function(e){return e.trim()})).map((function(e){return e[0].toUpperCase()+e.substring(1)})).join(" ")),number:n};b(o).then((function(e){c(t.concat(e))})),x(r,a),y("".concat(o.name," was added to phonebook")),setTimeout((function(){y(null)}),5e3)}()}}),r.a.createElement(g,{message:k}),r.a.createElement("h3",null,"Results"),r.a.createElement(m,{searchResult:d,handleRemoval:function(e){var n=t.find((function(n){return n.id===e}));if(window.confirm("Delete ".concat(n.name,"?"))){var a=t.filter((function(n){return n.id!==e}));console.log(a),E(e).then(c(a)).then(h(d.filter((function(n){return n.id!==e})))),y("".concat(n.name," has been deleted")),setTimeout((function(){y(null)}),5e3)}}}))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.224173fb.chunk.js.map